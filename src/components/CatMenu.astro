---
import { Image } from "astro:assets";
import searchIcon from "../assets/images/search.svg";
---

<div id="catMenu" class="w-full lg:w-64 flex-shrink-0 | flex flex-col | border-6 border-border-grey z-20 | fixed lg:fixed top-32 sm:top-48 lg:top-48 left-0 h-[calc(100vh-8rem)] sm:h-[calc(100vh-12rem)] lg:h-[calc(100vh-12rem)] | bg-surface-page | transform transition-all duration-300 ease-in-out | -translate-y-full">
    <form action="/products" method="get" class="flex flex-row h-14 | justify-between">
        <input type="text" name="search" placeholder="Søg efter produkt" class="w-85/100 pl-2 font-pill italic text-xl text-text-body bg-surface-page focus:outline-none"/>
        <button type="submit" class="w-15/100 bg-surface-search | flex | justify-center | items-center | hover:opacity-80 transition-opacity cursor-pointer">
            <Image src={searchIcon} alt="Søg" class="w-7 h-7" />
        </button>
    </form>
    <div class="flex-1 overflow-y-auto">
        <button onclick="window.location.href='/products?cat=Nintendo Switch 2'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Switch 2</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo Switch'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Switch</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo 3DS'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Nintendo 3DS</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo DS'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Nintendo DS</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo Wii U'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Wii U</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo Wii'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">   
            <h2 class="font-heading text-xl lg:text-lg">Wii</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo GameCube'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">GameCube</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo 64'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Nintendo 64</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo NES'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">NES</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo SNES'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">SNES</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo Game Boy'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Game Boy</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo Game Boy Advance'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Game Boy Advance</h2>
        </button>
        <button onclick="window.location.href='/products?cat=Nintendo Game Boy Color'" class="w-full h-24 sm:h-20 bg-surface-button text-text-body-alt | flex | justify-center | items-center | border-b-4 border-border-grey | hover:bg-text-body-alt hover:text-surface-button transition-colors duration-200 cursor-pointer">
            <h2 class="font-heading text-xl lg:text-lg">Game Boy Color</h2>
        </button>
    </div>
</div>

<script>
    // Mobile menu toggle functionality
    document.addEventListener('DOMContentLoaded', function() {
        const catMenu = document.getElementById('catMenu');
        const productToggle = document.getElementById('product-toggle');
        
                // Show menu by default on desktop and apply margin
        if (catMenu && window.innerWidth >= 1024) {
            catMenu.classList.remove('-translate-y-full');
            const mainContent = document.querySelector('.main-content');
            const heroSection = document.querySelector('.hero-section');
            const infoSection = document.querySelector('.info-section');
            const preorderSection = document.querySelector('.preorder-section');
            if (mainContent) {
                mainContent.classList.add('lg:ml-64');
            }
            if (heroSection) {
                heroSection.classList.add('lg:ml-64');
            }
            if (infoSection) {
infoSection.classList.add('lg:ml-64');
            }
            if (preorderSection) {
                preorderSection.classList.add('lg:ml-64');
            }
        }
        
        if (productToggle && catMenu) {
            productToggle.addEventListener('click', function(e) {
                e.preventDefault();
                e.stopPropagation();
                
                // Toggle on both mobile and desktop
                catMenu.classList.toggle('-translate-y-full');
                
                // Update main content and hero margin on desktop
                const mainContent = document.querySelector('.main-content');
                const heroSection = document.querySelector('.hero-section');
                const infoSection = document.querySelector('.info-section');
                const preorderSection = document.querySelector('.preorder-section');
                if (window.innerWidth >= 1024) {
                    if (catMenu.classList.contains('-translate-y-full')) {
                        mainContent?.classList.remove('lg:ml-64');
                        heroSection?.classList.remove('lg:ml-64');
                        infoSection?.classList.remove('lg:ml-64');
                        preorderSection?.classList.remove('lg:ml-64');
                    } else {
                        mainContent?.classList.add('lg:ml-64');
                        heroSection?.classList.add('lg:ml-64');
                        infoSection?.classList.add('lg:ml-64');
                        preorderSection?.classList.add('lg:ml-64');
                        catMenu.classList.remove('top-18');
                        catMenu.classList.add('top-32');
                    }
                }
            });
        }
        
        // Close menu when clicking outside on mobile
        document.addEventListener('click', function(event) {
            if (window.innerWidth < 1024) { // Only on mobile/tablet
                const target = event.target as Node;
                if (!catMenu?.contains(target) && !productToggle?.contains(target)) {
                    catMenu?.classList.add('-translate-y-full');
                }
            }
        });
    });
</script>
